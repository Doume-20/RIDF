!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t){e.exports=require("path")},function(e,t,r){"use strict";const n=r(0),o=r(3),i=r(10),s=r(22),c=r(23),a=r(24),u=r(26),l=r(28),{spawnedKill:f,spawnedCancel:p,setupTimeout:d,setExitHandler:h}=r(29),{handleInput:m,getSpawnedResult:g,makeAllStream:x,validateInputSync:y}=r(35),{mergePromise:w,getSpawnedPromise:v}=r(43),{joinCommand:E,parseCommand:b}=r(44),S=(e,t,r={})=>{const o=i._parse(e,t,r);return e=o.command,t=o.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=o.options).cwd||process.cwd(),encoding:"utf8",reject:!0,cleanup:!0,...r,windowsHide:!0}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:n})=>{const o=t?{...process.env,...e}:e;return r?c.env({env:o,cwd:n}):o})(r),r.stdio=l(r),"win32"===process.platform&&"cmd"===n.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:o}},P=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?s(t):t:void 0===r?void 0:"",I=(e,t,r)=>{const n=S(e,t,r),s=E(e,t);let c;try{c=o.spawn(n.file,n.args,n.options)}catch(e){const t=new o.ChildProcess,r=Promise.reject(u({error:e,stdout:"",stderr:"",all:"",command:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return w(t,r)}const l=v(c),y=d(c,n.options,l),b=h(c,n.options,y),I={isCanceled:!1};c.kill=f.bind(null,c.kill.bind(c)),c.cancel=p.bind(null,c,I);const k=a(async()=>{const[{error:e,code:t,signal:r,timedOut:o},i,a,l]=await g(c,n.options,b),f=P(n.options,i),p=P(n.options,a),d=P(n.options,l);if(e||0!==t||null!==r){const i=u({error:e,code:t,signal:r,stdout:f,stderr:p,all:d,command:s,parsed:n,timedOut:o,isCanceled:I.isCanceled,killed:c.killed});if(!n.options.reject)return i;throw i}return{command:s,exitCode:0,exitCodeName:"SUCCESS",stdout:f,stderr:p,all:d,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return i._enoent.hookChildProcess(c,n.parsed),m(c,n.options.input),c.all=x(c),w(c,k)};e.exports=I,e.exports.sync=(e,t,r)=>{const n=S(e,t,r),i=E(e,t);let s;y(n.options);try{s=o.spawnSync(n.file,n.args,n.options)}catch(e){throw u({error:e,stdout:"",stderr:"",all:"",command:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}if(s.stdout=P(n.options,s.stdout,s.error),s.stderr=P(n.options,s.stderr,s.error),s.error||0!==s.status||null!==s.signal){const e=u({...s,code:s.status,command:i,parsed:n,timedOut:s.error&&"ETIMEDOUT"===s.error.code,isCanceled:!1,killed:null!==s.signal});if(!n.options.reject)return e;throw e}return{command:i,exitCode:0,exitCodeName:"SUCCESS",stdout:s.stdout,stderr:s.stderr,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},e.exports.command=(e,t)=>{const[r,...n]=b(e);return I(r,n,t)},e.exports.commandSync=(e,t)=>{const[r,...n]=b(e);return I.sync(r,n,t)},e.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);const n=l.node(r),{nodePath:o=process.execPath,nodeOptions:i=process.execArgv}=r;return I(o,[...i,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("child_process")},function(e,t,r){"use strict";const n=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};e.exports=n,e.exports.default=n},function(e,t){e.exports=require("os")},function(e,t,r){var n=r(39);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(i),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},function(e,t){e.exports=require("stream")},function(e,t,r){e.exports=r.p+"application.ppkg"},function(e,t,r){"use strict";r.r(t),r.d(t,"Runner",(function(){return a}));var n=r(8),o=r.n(n),i=r(1),s=r.n(i),c=r(0);class a{constructor(e){this.context=e,this.status,this.GUID,this.current,this.update}log(e){return this.context.logger.log(e)}warn(e){return this.context.logger.warn(e)}get installationPpkg(){return Object(c.join)(__dirname,o.a)}async check(){if(this.log("Checking that the unit needs to be performed"),"win32"!==this.context.platform)return this.warn("Not running on Windows !"),!1;try{const{stdout:e}=await s()("powershell.exe",[`(Get-ProvisioningPackage -PackagePath '${this.installationPpkg}').packageId.Guid`]);this.GUID=e,this.log("GUID package: "+this.GUID)}catch(e){this.warn("Error while processing installation GUID: "+e)}if(this.GUID){try{const{stdout:e}=await s()("powershell.exe",[`(Get-ProvisioningPackage -PackageId '${this.GUID}').version`]);this.current=e,this.log("Version of current package: "+this.current)}catch(e){this.warn("Error while processing current version: "+e)}if(this.current){try{const{stdout:e}=await s()("powershell.exe",[`(Get-ProvisioningPackage -PackagePath '${this.installationPpkg}').version`]);this.update=e,this.log("Version of update package: "+this.update)}catch(e){this.warn("Error while processing update version: "+e)}return parseFloat(this.current)>=parseFloat(this.update)?(this.log("Your package is up to date"),!1):(this.log("Upgrading the package ..."),this.status="upgrade",!0)}return this.log("Installing the package ..."),this.status="install",!0}}async perform(){let e=!1;if("install"===this.status)try{this.log(`Running ${this.installationPpkg}, args=-QuietInstall...`);const{stdout:t,stderr:r,exitCode:n}=await s()("powershell.exe",[`Install-ProvisioningPackage -PackagePath '${this.installationPpkg}' -QuietInstall`]);this.log("Install Result: "+n),this.log("Install Stdout: "+t),this.log("Install Stderr: "+r),e=0===n,this.log("Finishing Installation")}catch(e){this.warn("Error while installing the application: "+e)}else if("upgrade"===this.status){try{this.log(`Removing package, GUID=${this.GUID}...`),await s()("powershell.exe",[`Remove-ProvisioningPackage -PackageId '${this.GUID}'`])}catch(e){this.warn("Error while removing the package: "+e)}try{this.log(`Running ${this.installationPpkg}, args=-QuietInstall...`);const{stdout:t,stderr:r,exitCode:n}=await s()("powershell.exe",[`Install-ProvisioningPackage -PackagePath '${this.installationPpkg}' -QuietInstall`]);this.log("Install Result: "+n),this.log("Install Stdout: "+t),this.log("Install Stderr: "+r),e=0===n,this.log("Finishing Installation")}catch(e){this.warn("Error while installing the application: "+e)}}return e}}},function(e,t,r){"use strict";const n=r(3),o=r(11),i=r(21);function s(e,t,r){const s=o(e,t,r),c=n.spawn(s.command,s.args,s.options);return i.hookChildProcess(c,s),c}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,r){const s=o(e,t,r),c=n.spawnSync(s.command,s.args,s.options);return c.error=c.error||i.verifyENOENTSync(c.status,s),c},e.exports._parse=o,e.exports._enoent=i},function(e,t,r){"use strict";const n=r(0),o=r(12),i=r(17),s=r(18),c="win32"===process.platform,a=/\.(?:com|exe)$/i,u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function l(e){if(!c)return e;const t=function(e){e.file=o(e);const t=e.file&&s(e.file);return t?(e.args.unshift(e.file),e.command=t,o(e)):e.file}(e),r=!a.test(t);if(e.options.forceShell||r){const r=u.test(t);e.command=n.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map(e=>i.argument(e,r));const o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const n={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?n:l(n)}},function(e,t,r){"use strict";const n=r(0),o=r(13),i=r(4)();function s(e,t){const r=process.cwd(),s=null!=e.options.cwd,c=s&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let a;try{a=o.sync(e.command,{path:(e.options.env||process.env)[i],pathExt:t?n.delimiter:void 0})}catch(e){}finally{c&&process.chdir(r)}return a&&(a=n.resolve(s?e.options.cwd:"",a)),a}e.exports=function(e){return s(e)||s(e,!0)}},function(e,t,r){const n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(0),i=n?";":":",s=r(14),c=e=>Object.assign(new Error("not found: "+e),{code:"ENOENT"}),a=(e,t)=>{const r=t.colon||i,o=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],s=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",c=n?s.split(r):[""];return n&&-1!==e.indexOf(".")&&""!==c[0]&&c.unshift(""),{pathEnv:o,pathExt:c,pathExtExe:s}},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:i,pathExtExe:u}=a(e,t),l=[],f=r=>new Promise((i,s)=>{if(r===n.length)return t.all&&l.length?i(l):s(c(e));const a=n[r],u=/^".*"$/.test(a)?a.slice(1,-1):a,f=o.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;i(p(d,r,0))}),p=(e,r,n)=>new Promise((o,c)=>{if(n===i.length)return o(f(r+1));const a=i[n];s(e+a,{pathExt:u},(i,s)=>{if(!i&&s){if(!t.all)return o(e+a);l.push(e+a)}return o(p(e,r,n+1))})});return r?f(0).then(e=>r(null,e),r):f(0)};e.exports=u,u.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:i}=a(e,t),u=[];for(let c=0;c<r.length;c++){const a=r[c],l=/^".*"$/.test(a)?a.slice(1,-1):a,f=o.join(l,e),p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let e=0;e<n.length;e++){const r=p+n[e];try{if(s.sync(r,{pathExt:i})){if(!t.all)return r;u.push(r)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw c(e)}},function(e,t,r){var n;r(2);function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){o(e,t||{},(function(e,t){e?n(e):r(t)}))}))}n(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}n="win32"===process.platform||global.TESTING_WINDOWS?r(15):r(16),e.exports=o,o.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,r){e.exports=i,i.sync=function(e,t){return o(n.statSync(e),e,t)};var n=r(2);function o(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function i(e,t,r){n.stat(e,(function(n,i){r(n,!n&&o(i,e,t))}))}},function(e,t,r){e.exports=o,o.sync=function(e,t){return i(n.statSync(e),t)};var n=r(2);function o(e,t,r){n.stat(e,(function(e,n){r(e,!e&&i(n,t))}))}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),a=parseInt("010",8),u=parseInt("001",8),l=c|a;return r&u||r&a&&o===s||r&c&&n===i||r&l&&0===i}(e,t)}},function(e,t,r){"use strict";const n=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e=e.replace(n,"^$1")},e.exports.argument=function(e,t){return e=(e=`"${e=(e=(e=""+e).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(n,"^$1"),t&&(e=e.replace(n,"^$1")),e}},function(e,t,r){"use strict";const n=r(2),o=r(19);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=n.openSync(e,"r"),n.readSync(r,t,0,150,0),n.closeSync(r)}catch(e){}return o(t.toString())}},function(e,t,r){"use strict";const n=r(20);e.exports=(e="")=>{const t=e.match(n);if(!t)return null;const[r,o]=t[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return"env"===i?o:o?`${i} ${o}`:i}},function(e,t,r){"use strict";e.exports=/^#!(.*)/},function(e,t,r){"use strict";const n="win32"===process.platform;function o(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function i(e,t){return n&&1===e&&!t.file?o(t.original,"spawn"):null}e.exports={hookChildProcess:function(e,t){if(!n)return;const r=e.emit;e.emit=function(n,o){if("exit"===n){const n=i(o,t);if(n)return r.call(e,"error",n)}return r.apply(e,arguments)}},verifyENOENT:i,verifyENOENTSync:function(e,t){return n&&1===e&&!t.file?o(t.original,"spawnSync"):null},notFoundError:o}},function(e,t,r){"use strict";e.exports=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}},function(e,t,r){"use strict";const n=r(0),o=r(4),i=e=>{let t;e={cwd:process.cwd(),path:process.env[o()],...e};let r=n.resolve(e.cwd);const i=[];for(;t!==r;)i.push(n.join(r,"node_modules/.bin")),t=r,r=n.resolve(r,"..");return i.push(n.dirname(process.execPath)),i.concat(e.path).join(n.delimiter)};e.exports=i,e.exports.default=i,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},n=o({env:r});return t.path=r[n],r[n]=e.exports(t),r}},function(e,t,r){"use strict";const n=r(25),o=new WeakMap,i=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,i=!1,s=0;const c=e.displayName||e.name||"<anonymous>",a=function(...n){if(o.set(a,++s),i){if(!0===t.throw)throw new Error(`Function \`${c}\` can only be called once`);return r}return i=!0,r=e.apply(this,n),e=null,r};return n(a,e),o.set(a,s),a};e.exports=i,e.exports.default=i,e.exports.callCount=e=>{if(!o.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return o.get(e)}},function(e,t,r){"use strict";const n=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};e.exports=n,e.exports.default=n},function(e,t,r){"use strict";const n=r(5),o=r(27);e.exports=({stdout:e,stderr:t,all:r,error:i,signal:s,code:c,command:a,timedOut:u,isCanceled:l,killed:f,parsed:{options:{timeout:p}}})=>{const[d,h]=((e,t)=>e&&e.code?[e.code,n.constants.errno[e.code]]:Number.isInteger(t)?[o.getSystemErrorName(-t),t]:[])(i,c),m=`Command ${(({timedOut:e,timeout:t,signal:r,exitCodeName:n,exitCode:o,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":r?"was killed with "+r:void 0!==o?`failed with exit code ${o} (${n})`:"failed")({timedOut:u,timeout:p,signal:s,exitCodeName:d,exitCode:h,isCanceled:l})}: ${a}`;return i instanceof Error?(i.originalMessage=i.message,i.message=`${m}\n${i.message}`):i=new Error(m),i.command=a,delete i.code,i.exitCode=h,i.exitCodeName=d,i.stdout=e,i.stderr=t,void 0!==r&&(i.all=r),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(u),i.isCanceled=l,i.killed=f&&!u,i.signal=s||void 0,i}},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";const n=["stdin","stdout","stderr"],o=e=>{if(!e)return;const{stdio:t}=e;if(void 0===t)return n.map(t=>e[t]);if((e=>n.some(t=>void 0!==e[t]))(e))throw new Error("It's not possible to provide `stdio` in combination with one of "+n.map(e=>`\`${e}\``).join(", "));if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const r=Math.max(t.length,n.length);return Array.from({length:r},(e,r)=>t[r])};e.exports=o,e.exports.node=e=>{const t=o(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}},function(e,t,r){"use strict";const n=r(5),o=r(30),i=r(34),s=(e,t,r,n)=>{if(!c(t,r,n))return;const o=u(r);setTimeout(()=>{e("SIGKILL")},o).unref()},c=(e,{forceKillAfterTimeout:t},r)=>a(e)&&!1!==t&&r,a=e=>e===n.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),u=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isInteger(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};e.exports={spawnedKill:(e,t="SIGTERM",r={})=>{const n=e(t);return s(e,t,r,n),n},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(0===t||void 0===t)return n;if(!Number.isInteger(t)||t<0)throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);let o;const s=new Promise((n,i)=>{o=setTimeout(()=>{((e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,r,i)},t)}),c=i(n,()=>{clearTimeout(o)});return Promise.race([s,c])},setExitHandler:(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;const s=o(()=>{e.kill()});return i(n,s)}}},function(e,t,r){var n,o=r(31),i=r(32),s=/^win/i.test(process.platform),c=r(33);function a(){f&&(f=!1,i.forEach((function(e){try{process.removeListener(e,l[e])}catch(e){}})),process.emit=m,process.reallyExit=d,n.count-=1)}function u(e,t,r){n.emitted[e]||(n.emitted[e]=!0,n.emit(e,t,r))}"function"!=typeof c&&(c=c.EventEmitter),process.__signal_exit_emitter__?n=process.__signal_exit_emitter__:((n=process.__signal_exit_emitter__=new c).count=0,n.emitted={}),n.infinite||(n.setMaxListeners(1/0),n.infinite=!0),e.exports=function(e,t){o.equal(typeof e,"function","a callback must be provided for exit handler"),!1===f&&p();var r="exit";t&&t.alwaysLast&&(r="afterexit");return n.on(r,e),function(){n.removeListener(r,e),0===n.listeners("exit").length&&0===n.listeners("afterexit").length&&a()}},e.exports.unload=a;var l={};i.forEach((function(e){l[e]=function(){process.listeners(e).length===n.count&&(a(),u("exit",null,e),u("afterexit",null,e),s&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),e.exports.signals=function(){return i},e.exports.load=p;var f=!1;function p(){f||(f=!0,n.count+=1,i=i.filter((function(e){try{return process.on(e,l[e]),!0}catch(e){return!1}})),process.emit=g,process.reallyExit=h)}var d=process.reallyExit;function h(e){process.exitCode=e||0,u("exit",process.exitCode,null),u("afterexit",process.exitCode,null),d.call(process,process.exitCode)}var m=process.emit;function g(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var r=m.apply(this,arguments);return u("exit",process.exitCode,null),u("afterexit",process.exitCode,null),r}return m.apply(this,arguments)}},function(e,t){e.exports=require("assert")},function(e,t){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";e.exports=async(e,t=(()=>{}))=>{let r;try{r=await e}catch(e){throw await t(),e}return await t(),r}},function(e,t,r){"use strict";const n=r(36),o=r(37),i=r(42),s=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},c=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(e)return r?t?o(e,{encoding:t,maxBuffer:n}):o.buffer(e,{maxBuffer:n}):new Promise((t,r)=>{e.once("end",t).once("error",r)})};e.exports={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(n(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:e=>{if(!e.stdout&&!e.stderr)return;const t=i();return e.stdout&&t.add(e.stdout),e.stderr&&t.add(e.stderr),t},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},a)=>{const u=c(e,{encoding:n,buffer:o,maxBuffer:i}),l=c(t,{encoding:n,buffer:o,maxBuffer:i}),f=c(r,{encoding:n,buffer:o,maxBuffer:2*i});try{return await Promise.all([a,u,l,f])}catch(n){return Promise.all([{error:n,code:n.code,signal:n.signal,timedOut:n.timedOut},s(e,u),s(t,l),s(r,f)])}},validateInputSync:({input:e})=>{if(n(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}}},function(e,t,r){"use strict";const n=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;n.writable=e=>n(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,n.readable=e=>n(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,n.duplex=e=>n.writable(e)&&n.readable(e),n.transform=e=>n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,e.exports=n},function(e,t,r){"use strict";const n=r(38),o=r(41);class i extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function s(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let s;return await new Promise((c,a)=>{const u=e=>{e&&(e.bufferedData=s.getBufferedValue()),a(e)};s=n(e,o(t),e=>{e?u(e):c()}),s.on("data",()=>{s.getBufferedLength()>r&&u(new i)})}),s.getBufferedValue()}e.exports=s,e.exports.default=s,e.exports.buffer=(e,t)=>s(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>s(e,{...t,array:!0}),e.exports.MaxBufferError=i},function(e,t,r){var n=r(6),o=r(40),i=r(2),s=function(){},c=/^v?\.0/.test(process.version),a=function(e){return"function"==typeof e},u=function(e,t,r,u){u=n(u);var l=!1;e.on("close",(function(){l=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return u(e);l=!0,u()}));var f=!1;return function(t){if(!l&&!f)return f=!0,function(e){return!!c&&(!!i&&((e instanceof(i.ReadStream||s)||e instanceof(i.WriteStream||s))&&a(e.close)))}(e)?e.close(s):function(e){return e.setHeader&&a(e.abort)}(e)?e.abort():a(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},l=function(e){e()},f=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=a(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(o,i){var s=i<t.length-1;return u(o,s,i>0,(function(t){e||(e=t),t&&n.forEach(l),s||(n.forEach(l),r(e))}))}));return t.reduce(f)}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},function(e,t,r){var n=r(6),o=function(){},i=function(e,t,r){if("function"==typeof t)return i(e,null,t);t||(t={}),r=n(r||o);var s=e._writableState,c=e._readableState,a=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=!1,f=function(){e.writable||p()},p=function(){u=!1,a||r.call(e)},d=function(){a=!1,u||r.call(e)},h=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},g=function(){process.nextTick(x)},x=function(){if(!l)return(!a||c&&c.ended&&!c.destroyed)&&(!u||s&&s.ended&&!s.destroyed)?void 0:r.call(e,new Error("premature close"))},y=function(){e.req.on("finish",p)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!s&&(e.on("end",f),e.on("close",f)):(e.on("complete",p),e.on("abort",g),e.req?y():e.on("request",y)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",h),e.on("end",d),e.on("finish",p),!1!==t.error&&e.on("error",m),e.on("close",g),function(){l=!0,e.removeListener("complete",p),e.removeListener("abort",g),e.removeListener("request",y),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("exit",h),e.removeListener("end",d),e.removeListener("error",m),e.removeListener("close",g)}};e.exports=i},function(e,t,r){"use strict";const{PassThrough:n}=r(7);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let i=!1;t?i=!(r||o):r=r||"utf8",o&&(r=null);const s=new n({objectMode:i});r&&s.setEncoding(r);let c=0;const a=[];return s.on("data",e=>{a.push(e),i?c=a.length:c+=e.length}),s.getBufferedValue=()=>t?a:o?Buffer.concat(a,c):a.join(""),s.getBufferedLength=()=>c,s}},function(e,t,r){"use strict";const{PassThrough:n}=r(7);e.exports=function(){var e=[],t=new n({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=o,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),t;function r(n){return Array.isArray(n)?(n.forEach(r),this):(e.push(n),n.once("end",i.bind(null,n)),n.once("error",t.emit.bind(t,"error")),n.pipe(t,{end:!1}),this)}function o(){return 0==e.length}function i(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}},function(e,t,r){"use strict";const n=(e,t,r)=>{const n="function"==typeof t?(...e)=>t()[r](...e):t[r].bind(t);Object.defineProperty(e,r,{value:n,writable:!0,enumerable:!1,configurable:!0})};e.exports={mergePromise:(e,t)=>(n(e,t,"then"),n(e,t,"catch"),Promise.prototype.finally&&n(e,t,"finally"),e),getSpawnedPromise:e=>new Promise((t,r)=>{e.on("exit",(e,r)=>{t({code:e,signal:r})}),e.on("error",e=>{r(e)}),e.stdin&&e.stdin.on("error",e=>{r(e)})})}},function(e,t,r){"use strict";const n=/ +/g,o=(e,t,r)=>{if(0===r)return[t];const n=e[e.length-1];return n.endsWith("\\")?[...e.slice(0,-1),`${n.slice(0,-1)} ${t}`]:[...e,t]};e.exports={joinCommand:(e,t=[])=>Array.isArray(t)?[e,...t].join(" "):e,parseCommand:e=>e.trim().split(n).reduce(o,[])}}])}));